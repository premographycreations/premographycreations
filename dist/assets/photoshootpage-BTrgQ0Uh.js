import{a as x,r,u as f,j as e}from"./index-B91yj_H6.js";import{i as y,j as N,k as b}from"./s3-D1JRhvOZ.js";import{N as k}from"./nav-BKpyWsoo.js";import w from"./footer-s8R4tRlT.js";import{W as $}from"./whatsappbutton-tM2-OH78.js";const C=()=>{const{categoryName:a,subfolder:t}=x(),[n,i]=r.useState([]),[c,l]=r.useState([]),[h,d]=r.useState(!0),g=f();r.useEffect(()=>{async function o(){try{d(!0);const s=await y(a,t);if(a.toLowerCase()==="events"&&!t&&Array.isArray(s)){const v=await Promise.all(s.map(async m=>{const j=await N(a,m);return{name:m,cover:j}}));l(v),i([])}else i(s),l([])}catch(s){console.error("Error fetching data:",s)}finally{d(!1)}}o()},[a,t]);const p=o=>{g(`/photoshoot/${a}/${o}`)},u=async o=>{try{const s=await b(a,o);s&&s.length>0?window.open(s[0],"_blank"):alert("No video link found for this event.")}catch(s){console.error("Error fetching video link:",s),alert("Failed to load video link.")}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{}),e.jsxs("div",{className:"photoshoot-page",children:[e.jsxs("h2",{children:[a," ",t?` - ${t}`:""," Gallery"]}),h&&e.jsx("p",{children:"Loading..."}),c.length>0&&e.jsx("div",{className:"subfolder-list",children:c.map((o,s)=>e.jsxs("div",{className:"subfolder-card",children:[e.jsx("div",{className:"subfolder-image",children:e.jsx("img",{src:o.cover||"/placeholder-image.jpg",alt:`${o.name} cover`})}),e.jsx("h3",{children:o.name}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{onClick:()=>p(o.name),children:"Images"}),e.jsx("button",{onClick:()=>u(o.name),children:"Video"})]})]},s))}),n.length>0&&e.jsx("div",{className:"grid",children:n.map((o,s)=>o.match(/\.(mp4|mov|m4v|avi|mkv|webm)$/i)?e.jsx("video",{controls:!0,children:e.jsx("source",{src:o,type:"video/mp4"})},s):e.jsx("img",{src:o,alt:`${a}-${s}`},s))})]}),e.jsx(w,{}),e.jsx($,{})]})};export{C as default};
